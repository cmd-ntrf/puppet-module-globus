<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-puppet-globus">puppet-globus</h1>

<p><a href="https://forge.puppetlabs.com/treydock/globus"><img
src="http://img.shields.io/puppetforge/v/treydock/globus.svg"></a> <a
href="https://travis-ci.org/treydock/puppet-module-globus"><img
src="https://travis-ci.org/treydock/puppet-module-globus.png"></a></p>

<h2 id="label-Overview">Overview</h2>

<p>This module manages Globus Connect Server.</p>

<h2 id="label-Usage">Usage</h2>

<h3 id="label-Class-3A+globus">Class: globus</h3>

<p>Install and configure a Globus IO endpoint that uses OAuth. This example
assumes host cert/key will not be provided by Globus.</p>

<pre class="code ruby"><code class="ruby">class { &#39;globus&#39;:
  include_id_server =&gt; false,
  globus_user =&gt; &#39;myusername&#39;,
  globus_password =&gt; &#39;password&#39;,
  endpoint_name =&gt; &#39;myorg&#39;,
  endpoint_public =&gt; true,
  myproxy_server =&gt; &#39;myproxy.example.com:7512&#39;,
  oauth_server =&gt; &#39;myproxy.example.com&#39;,
  security_identity_method =&gt; &#39;OAuth&#39;,
  security_fetch_credentials_from_relay =&gt; false,
  security_certificate_file =&gt; &#39;/etc/grid-security/hostcert.pem&#39;,
  security_key_file =&gt; &#39;/etc/grid-security/hostkey.pem&#39;,
  gridftp_server =&gt; $::fqdn,
  gridftp_restrict_paths =&gt; [&#39;RW~&#39;,&#39;N~/.*&#39;,&#39;RW/project&#39;],
  # Example of extra settings
  extra_gridftp_settings =&gt; [
    &#39;log_level ALL&#39;,
    &#39;log_single /var/log/gridftp-auth.log&#39;,
    &#39;log_transfer /var/log/gridftp-transfer.log&#39;,
  ],
}
</code></pre>

<p>This is an example of setting up a system that acts as both MyProxy and
OAuth host. This example assumes the host cert/key are not provided by
Globus.</p>

<pre class="code ruby"><code class="ruby">class { &#39;globus&#39;:
  include_io_server =&gt; false,
  include_id_server =&gt; true,
  include_oauth_server =&gt; true,
  globus_user =&gt; &#39;myusername&#39;,
  globus_password =&gt; &#39;password&#39;,
  endpoint_name =&gt; &#39;myorg&#39;,
  endpoint_public =&gt; true,
  myproxy_server =&gt; &#39;myproxy.example.com:7512&#39;,
  oauth_server =&gt; &#39;myproxy.example.com&#39;,
  security_identity_method =&gt; &#39;OAuth&#39;,
  security_fetch_credentials_from_relay =&gt; false,
  security_certificate_file =&gt; &#39;/etc/grid-security/hostcert.pem&#39;,
  security_key_file =&gt; &#39;/etc/grid-security/hostkey.pem&#39;,
}
</code></pre>

<p>Below is an example of setting up the IO server to use CILogon.</p>

<pre class="code ruby"><code class="ruby">class { &#39;globus&#39;:
  include_id_server =&gt; false,
  globus_user =&gt; &#39;myusername&#39;,
  globus_password =&gt; &#39;password&#39;,
  endpoint_name =&gt; &#39;myorg&#39;,
  endpoint_public =&gt; true,
  myproxy_server =&gt; &#39;myproxy.example.com:7512&#39;,
  oauth_server =&gt; &#39;myproxy.example.com&#39;,
  security_identity_method =&gt; &#39;CILogon&#39;,
  security_cilogon_identity_provider =&gt; &#39;My Org&#39;,
  security_fetch_credentials_from_relay =&gt; false,
  security_certificate_file =&gt; &#39;/etc/grid-security/hostcert.pem&#39;,
  security_key_file =&gt; &#39;/etc/grid-security/hostkey.pem&#39;,
  gridftp_server =&gt; $::fqdn,
  gridftp_restrict_paths =&gt; [&#39;RW~&#39;,&#39;N~/.*&#39;,&#39;RW/project&#39;],
  # Example of extra settings
  extra_gridftp_settings =&gt; [
    &#39;log_level ALL&#39;,
    &#39;log_single /var/log/gridftp-auth.log&#39;,
    &#39;log_transfer /var/log/gridftp-transfer.log&#39;,
  ],
}
</code></pre>

<p>Below is an example of what would be required to setup Globus GridFTP to
also work with OSG GridFTP. This example has not been verified since OSG
3.3. OSG module referenced: <a
href="https://github.com/treydock/puppet-osg">github.com/treydock/puppet-osg</a></p>

<pre class="code ruby"><code class="ruby">include ::osg
include ::osg::gridftp
class { &#39;::globus&#39;:
  manage_service =&gt; false,
  include_id_server =&gt; false,
  remove_cilogon_cron =&gt; true,
  extra_gridftp_settings =&gt; [
    &#39;log_level ALL&#39;
    &#39;log_single /var/log/gridftp-auth.log&#39;
    &#39;log_transfer /var/log/gridftp.log&#39;
    &#39;$LLGT_LOG_IDENT &quot;gridftp-server-llgt&quot;&#39;
    &#39;$LCMAPS_DB_FILE &quot;/etc/lcmaps.db&quot;&#39;
    &#39;$LCMAPS_POLICY_NAME &quot;authorize_only&quot;&#39;
    &#39;$LLGT_LIFT_PRIVILEGED_PROTECTION &quot;1&quot;&#39;
    &#39;$LCMAPS_DEBUG_LEVEL &quot;2&quot;&#39;
    &#39;$FTPNOSORT 1&#39;
  ],
  first_gridftp_callback =&gt; &#39;|globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout&#39;,
}

# Add globus repo before installing OSG GridFTP
Yumrepo[&#39;Globus-Toolkit&#39;] -&gt; Package[&#39;osg-gridftp&#39;]
# Apply OSG GridFTP before Globus
Package[&#39;osg-gridftp&#39;] -&gt; Class[&#39;::globus::install&#39;]
</code></pre>

<h2 id="label-Reference">Reference</h2>

<p><a
href="http://treydock.github.io/puppet-module-globus/">treydock.github.io/puppet-module-globus/</a></p>

<h2 id="label-Compatibility">Compatibility</h2>

<p>Tested using</p>
<ul><li>
<p>CentOS 6</p>
</li><li>
<p>RedHat 7</p>
</li></ul>

<h2 id="label-Development">Development</h2>

<h3 id="label-Testing">Testing</h3>

<p>Testing requires the following dependencies:</p>
<ul><li>
<p>rake</p>
</li><li>
<p>bundler</p>
</li></ul>

<p>Install gem dependencies</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_install'>install</span>
</code></pre>

<p>Run unit tests</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rake'>rake</span> <span class='id identifier rubyid_test'>test</span>
</code></pre>

<p>If you have Vagrant &gt;= 1.2.0 installed you can run system tests</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rake'>rake</span> <span class='id identifier rubyid_beaker'>beaker</span>
</code></pre>

<h2 id="label-Further+Information">Further Information</h2>

<p>*</p>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>